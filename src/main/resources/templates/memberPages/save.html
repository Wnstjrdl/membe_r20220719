<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<script src="https://code.jquery.com/jquery-3.6.0.js"></script>
<head>
  <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <script th:src="@{/js/bootstrap.bundle.min.js}"></script>
  <title>Title</title>
</head>
<body>
<form action="/member/save" method="post"  enctype="multipart/form-data" >
    ì´ë©”ì¼:<input  type ="text"  class="form-control" name="memberEmail" id="memberEmail" placeholder="ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”" onblur="EmailDuplicate()">
    <span id="Email-dup-result"></span> <br />

    ë¹„ë°€ë²ˆí˜¸:<input type ="text" class="form-control" name="memberPassword" id="memberPassword" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"><br />
    <div id="pwCheck"></div>
    ì´ë¦„:<input type="text" class="form-control" name="memberName" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”"><br />
    ì „í™”ë²ˆí˜¸:<input type="text" class="form-control" name="memberMobile" id="memberMobile" placeholder="ì „í™”ë²ˆí˜¸ ì…ë ¥í•˜ì„¸ìš”"><br />
    <div id="mobileCheck"></div>
    í”„ë¡œí•„:<input type="file"  name="memberFile" ><br />
    <input type="text" id="sample6_postcode" placeholder="ìš°í¸ë²ˆí˜¸">
    <input type="button" onclick="sample6_execDaumPostcode()" value="ìš°í¸ë²ˆí˜¸ ì°¾ê¸°"><br>
    <input type="text" id="sample6_address" placeholder="ì£¼ì†Œ"><br>
    <input type="text" id="sample6_detailAddress" placeholder="ìƒì„¸ì£¼ì†Œ">
    <input type="text" id="sample6_extraAddress" placeholder="ì°¸ê³ í•­ëª©"><br />

    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>

    <input class="btn btn-primary" type="submit" value="íšŒì›ê°€ì…">
</form>
        <button class="btn btn-warning" onclick="back()">ëŒì•„ê°€ê¸°</button>
</body>
    <script th:inline="javascript">
        function sample6_execDaumPostcode() {
            new daum.Postcode({
                oncomplete: function(data) {
                    // íŒì—…ì—ì„œ ê²€ìƒ‰ê²°ê³¼ í•­ëª©ì„ í´ë¦­í–ˆì„ë•Œ ì‹¤í–‰í•  ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ë¶€ë¶„.

                    // ê° ì£¼ì†Œì˜ ë…¸ì¶œ ê·œì¹™ì— ë”°ë¼ ì£¼ì†Œë¥¼ ì¡°í•©í•œë‹¤.
                    // ë‚´ë ¤ì˜¤ëŠ” ë³€ìˆ˜ê°€ ê°’ì´ ì—†ëŠ” ê²½ìš°ì—” ê³µë°±('')ê°’ì„ ê°€ì§€ë¯€ë¡œ, ì´ë¥¼ ì°¸ê³ í•˜ì—¬ ë¶„ê¸° í•œë‹¤.
                    var addr = ''; // ì£¼ì†Œ ë³€ìˆ˜
                    var extraAddr = ''; // ì°¸ê³ í•­ëª© ë³€ìˆ˜

                    //ì‚¬ìš©ìê°€ ì„ íƒí•œ ì£¼ì†Œ íƒ€ì…ì— ë”°ë¼ í•´ë‹¹ ì£¼ì†Œ ê°’ì„ ê°€ì ¸ì˜¨ë‹¤.
                    if (data.userSelectedType === 'R') { // ì‚¬ìš©ìê°€ ë„ë¡œëª… ì£¼ì†Œë¥¼ ì„ íƒí–ˆì„ ê²½ìš°
                        addr = data.roadAddress;
                    } else { // ì‚¬ìš©ìê°€ ì§€ë²ˆ ì£¼ì†Œë¥¼ ì„ íƒí–ˆì„ ê²½ìš°(J)
                        addr = data.jibunAddress;
                    }

                    // ì‚¬ìš©ìê°€ ì„ íƒí•œ ì£¼ì†Œê°€ ë„ë¡œëª… íƒ€ì…ì¼ë•Œ ì°¸ê³ í•­ëª©ì„ ì¡°í•©í•œë‹¤.
                    if(data.userSelectedType === 'R'){
                        // ë²•ì •ë™ëª…ì´ ìˆì„ ê²½ìš° ì¶”ê°€í•œë‹¤. (ë²•ì •ë¦¬ëŠ” ì œì™¸)
                        // ë²•ì •ë™ì˜ ê²½ìš° ë§ˆì§€ë§‰ ë¬¸ìê°€ "ë™/ë¡œ/ê°€"ë¡œ ëë‚œë‹¤.
                        if(data.bname !== '' && /[ë™|ë¡œ|ê°€]$/g.test(data.bname)){
                            extraAddr += data.bname;
                        }
                        // ê±´ë¬¼ëª…ì´ ìˆê³ , ê³µë™ì£¼íƒì¼ ê²½ìš° ì¶”ê°€í•œë‹¤.
                        if(data.buildingName !== '' && data.apartment === 'Y'){
                            extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                        }
                        // í‘œì‹œí•  ì°¸ê³ í•­ëª©ì´ ìˆì„ ê²½ìš°, ê´„í˜¸ê¹Œì§€ ì¶”ê°€í•œ ìµœì¢… ë¬¸ìì—´ì„ ë§Œë“ ë‹¤.
                        if(extraAddr !== ''){
                            extraAddr = ' (' + extraAddr + ')';
                        }
                        // ì¡°í•©ëœ ì°¸ê³ í•­ëª©ì„ í•´ë‹¹ í•„ë“œì— ë„£ëŠ”ë‹¤.
                        document.getElementById("sample6_extraAddress").value = extraAddr;

                    } else {
                        document.getElementById("sample6_extraAddress").value = '';
                    }

                    // ìš°í¸ë²ˆí˜¸ì™€ ì£¼ì†Œ ì •ë³´ë¥¼ í•´ë‹¹ í•„ë“œì— ë„£ëŠ”ë‹¤.
                    document.getElementById('sample6_postcode').value = data.zonecode;
                    document.getElementById("sample6_address").value = addr;
                    // ì»¤ì„œë¥¼ ìƒì„¸ì£¼ì†Œ í•„ë“œë¡œ ì´ë™í•œë‹¤.
                    document.getElementById("sample6_detailAddress").focus();
                }
            }).open();
        }






        const back = () => {
          location.href="/"
        }




        const EmailDuplicate = () => {
            const  Email=document.getElementById("memberEmail").value;
            const  checkResult=document.getElementById("Email-dup-result");
            $.ajax({
                type:"post",
                url:"/member/emailCheck",
                dataType: "text",
                data:{
                    "memberEmail":Email
                },
                success:function (result){
                    if(result== "ok"){
                        checkResult.innerHTML="ì‚¬ìš©ê°€ëŠ¥í•©ë‹ˆë‹¤ğŸ˜Š";
                        checkResult.style.color="green";
                    }else {
                        checkResult.innerHTML="ì¤‘ë³µëœ ì•„ì´ë”” ì…ë‹ˆë‹¤ğŸ˜’";
                        checkResult.style.color="red";
                    }
                },
                error:function (){
                    alert("ì‹¤íŒ¨")
                }
            });
        }
        const pwJ=/^[A-Za-z0-9]{4,12}$/;
        $("#memberPassword").blur(function () {
            if(pwJ.test($("#memberPassword").val())){
                console.log("ture");
                $("#pwCheck").text("ì‚¬ìš©ê°€ëŠ¥í•©ë‹ˆë‹¤ğŸ˜Š")
                $("#pwCheck").css("color","green");
            }else {
                console.log("false");
                $("#pwCheck").text("ìˆ«ì,ë¬¸ìë¡œë§Œ4~12ìë¦¬ì…ë ¥ğŸ˜’")
                $("#pwCheck").css("color","red");
            }


        })

        const mobileJ= /^01([0|1|6|7|8|9]?)?([0-9]{3,4})?([0-9]{4})$/;
        $("#memberMobile").blur(function () {
            if(mobileJ.test($("#memberMobile").val())){
                console.log("ture");
                $("#mobileCheck").text("ì „í™”ë²ˆí˜¸ê°€ ì…ë ¥ë˜ì—ˆìŠµë‹ˆë‹¤ğŸ˜Š")
                $("#mobileCheck").css("color","green");
            }else {
                console.log("false");
                $("#mobileCheck").text("ë‹¤ì‹œì…ë ¥í•´ì£¼ì„¸ìš”ğŸ˜’")
                $("#mobileCheck").css("color","red");
            }


        })
    </script>
</html>