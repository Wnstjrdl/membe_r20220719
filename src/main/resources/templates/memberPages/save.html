<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<script src="https://code.jquery.com/jquery-3.6.0.js"></script>
<head>
  <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <script th:src="@{/js/bootstrap.bundle.min.js}"></script>
  <title>Title</title>
</head>
<body>
<form action="/member/save" method="post"  enctype="multipart/form-data" >
    ì´ë©”ì¼:<input  type ="text"  class="form-control" name="memberEmail" id="memberEmail" placeholder="ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”" onblur="EmailDuplicate()">
    <span id="Email-dup-result"></span> <br />

    ë¹„ë°€ë²ˆí˜¸:<input type ="text" class="form-control" name="memberPassword" id="memberPassword" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"><br />
    <div id="pwCheck"></div>
    ì´ë¦„:<input type="text" class="form-control" name="memberName" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”"><br />
    ì „í™”ë²ˆí˜¸:<input type="text" class="form-control" name="memberMobile" id="memberMobile" placeholder="ì „í™”ë²ˆí˜¸ ì…ë ¥í•˜ì„¸ìš”"><br />
    <div id="mobileCheck"></div>
    í”„ë¡œí•„:<input type="file"  name="memberFile" ><br />
    <input class="btn btn-primary" type="submit" value="íšŒì›ê°€ì…">
</form>
        <button class="btn btn-warning" onclick="back()">ëŒì•„ê°€ê¸°</button>
</body>
    <script th:inline="javascript">
        const back = () => {
          location.href="/"
        }




        const EmailDuplicate = () => {
            const  Email=document.getElementById("memberEmail").value;
            const  checkResult=document.getElementById("Email-dup-result");
            $.ajax({
                type:"post",
                url:"/member/emailCheck",
                dataType: "text",
                data:{
                    "memberEmail":Email
                },
                success:function (result){
                    if(result== "ok"){
                        checkResult.innerHTML="ì‚¬ìš©ê°€ëŠ¥í•©ë‹ˆë‹¤ğŸ˜Š";
                        checkResult.style.color="green";
                    }else {
                        checkResult.innerHTML="ì¤‘ë³µëœ ì•„ì´ë”” ì…ë‹ˆë‹¤ğŸ˜’";
                        checkResult.style.color="red";
                    }
                },
                error:function (){
                    alert("ì‹¤íŒ¨")
                }
            });
        }
        const pwJ=/^[A-Za-z0-9]{4,12}$/;
        $("#memberPassword").blur(function () {
            if(pwJ.test($("#memberPassword").val())){
                console.log("ture");
                $("#pwCheck").text("ì‚¬ìš©ê°€ëŠ¥í•©ë‹ˆë‹¤ğŸ˜Š")
                $("#pwCheck").css("color","green");
            }else {
                console.log("false");
                $("#pwCheck").text("ìˆ«ì,ë¬¸ìë¡œë§Œ4~12ìë¦¬ì…ë ¥ğŸ˜’")
                $("#pwCheck").css("color","red");
            }


        })

        const mobileJ= /^01([0|1|6|7|8|9]?)?([0-9]{3,4})?([0-9]{4})$/;
        $("#memberMobile").blur(function () {
            if(mobileJ.test($("#memberMobile").val())){
                console.log("ture");
                $("#mobileCheck").text("ì „í™”ë²ˆí˜¸ê°€ ì…ë ¥ë˜ì—ˆìŠµë‹ˆë‹¤ğŸ˜Š")
                $("#mobileCheck").css("color","green");
            }else {
                console.log("false");
                $("#mobileCheck").text("ë‹¤ì‹œì…ë ¥í•´ì£¼ì„¸ìš”ğŸ˜’")
                $("#mobileCheck").css("color","red");
            }


        })
    </script>
</html>